CCDB 1.00

   CCDB 1.00 release notes

	Available at https://halldweb1.jlab.org/wiki/index.php/CCDB_1.00

Command line tools

Creating tables from text files

   CCDB now can help to create a table from text file with data. It infers
   number of columns, rows and column names (if file provides it)

   It is usual situation when one already has text data file and want to
   create table to store the data.

   mktbl -f helps with this

> mktbl /test/haha -f python/tests/test_table.txt #my lonely comment
The command to create table:

mktbl /test/haha -r 2 X Y Z #my lonely comment

Comments in file:
Test assignment for software tests

   Now one can copy it and run. It is not done automatically to be sure
   the values are reviewed.

   The file format is:
#Test assignment for software tests
#& X            Y            Z
  2.2          2.3          2.4
  2.5          2.6          2.7

   You may notice that line with column names starts with #& while normal
   comments starts with plain #

   (Please, read ccdb_file_format.pdf in doc directory of CCDB for more
   info about how CCDB reads text files)

   One can use column types right there:
#& X=int            Y=int            NOT_Z=string

information about files

   -f flag added to Info command also. info -f gives the info of text
   files, how CCDB sees it.
 ~/halld/ccdb/trunk $ ccdb info -f $CCDB_HOME/python/tests/test_table.txt
Rows: 2
Columns: 3
Column names:
    X
    Y
    Z

Comments in file:
Test assignment for software unit tests

Type 'ccdb mktbl -f /home/romanov/halld/ccdb/trunk/python/tests/test_table.txt'
to see how to create a table for the file
Type 'ccdb add <table name> /home/romanov/halld/ccdb/trunk/python/tests/test_tab
le.txt #<comments>' to add the file to existing table (rows and columns must con
sist)

'ls' command update

   When ls is used directly on a table name, it gives data versions (as
   vers command):
 ccdb ls /test/test_vars/test_table
/test/test_vars/test_table
(ID)   (Created)              (Modified)              (variation)     (run range)      (comments)
 5      2012-10-30 23-48-43    2012-10-30 23-48-43     subtest         0-inf       Test assignment for
 4      2012-10-30 23-48-42    2012-10-30 23-48-42     default         0-inf       Test assignment for
 1      2012-07-30 23-48-42    2012-07-30 23-48-42     default         0-inf       Test assignment for

   -l flag adds info about table like (info) command.
ccdb ls -l /test/test_vars/test_table

   The flags of ls command changed too:
Lists directories and tables for current directory

- Accepts wildcards symbols '*', and '?'

- When used on single table name, gives table data version as 'vers <table name>
' command

keys:
    -v or --variations   - prints all variations
    -t or --tables       - prints full path for all tables
    -d or --directories  - prints all directories
    -x or --dtree        - draws directory tree

    -l or --extended     - shows extended info when is used on table

JAVA API

   Users can use JAVA to access CCDB data. Or even Kotlin JVM
   language (http://kotlin.jetbrains.org/).

   That is how it looks:
        JDBCProvider provider = CcdbPackage.createProvider("mysql://localhost");
        provider.connect();
        Assignment asgmt = provider.getData("/test/test_vars/test_table");

        // gets data represented as number of columns
        for(Vector<String> row : asgmt.getStringTable()){
            for(String cell: row){
                                System.out.print(cell + " ");
                        }
                        System.out.println(); //next line after a row
        }

        //gets some extended info about data
        System.out.println(asgmt.getTypeTable().getFullPath());

   CCDB is provided as jar file including all required database drivers.
   The file could be found in:
$CCDB_HOME/java/out/artifacts

C++ API update

Cell by cell readout and extended data inforation

   In 0.9 users can read data like:
vector<vector<int> > tabledValues;
calib->GetCalib(tabledValues, "/test/test_vars/test_table2"));

   So there is no extended information about the data, like column types
   or date. In CCDB 1.00 new GetAssignment function is introduced, which
   returns Assignment object. Assignment holds information about data and
   its type table. For example that is the way of getting columns
   information:
auto_ptr<Assignment> a(calib->GetAssignment("/test/test_vars/test_table"));    /
/ auto_ptr to delete assignment after
                                                                               /
/ auto_ptr is deprecated in C++11 btw

//Get type table and it holds information about columns
const vector<ConstantsTypeColumn *> &columns = a->GetTypeTable()->GetColumns();

cout<<"Columns:"<<endl;
for(size_t i=0; i< columns.size(); i++)
{
    cout<<"   name: '"<< columns[i]->GetName()
        <<"'  type: '"<< columns[i]->GetTypeString() <<"'"
        <<endl;
}

   But Assignment has even more handy feature. CCDB can have columns of
   different types in one table. For example: 2 columns of ints, 1 column
   of doubles and 1 column of strings (with some descriptions). There was
   no direct way to read it that way in 0.9. But with assignment you can
   do:
a->GetValueInt(0, 0)
a->GetValueInt(0, 1)
a->GetValueDouble(0, 2)
a->GetValue(0, 3)       //string

   Or even better! If column names are "x", "y", "gain", "description" one
   can use
a->GetValueInt("x")
a->GetValueInt("y")
a->GetValueDouble("gain")
a->GetValue("description")       //string
//assuming row is 0. if it is not 0, one can use:
a->GetValueInt(101, "x")

Examples

   CCDB now ships examples folder:
 $CCDB_HOME/examples

   Where you can find some simple examples of how to use CCDB C++ user
   api. Add 'with-examples=true' flag to scons to compile the examples.
   scons with-examples=true

   After the compilation examples can be run from console as
   example_ccdb_(example name)

Files changed since version 0.09:

------------------------------------------------------------------------
r1480 | romanov | 2014-01-09 18:27:52 -0500 (Thu, 09 Jan 2014) | 3 lines

Removed PyQt import. Why was it there?
M    errors.py

------------------------------------------------------------------------
r1490 | romanov | 2014-01-13 17:46:54 -0500 (Mon, 13 Jan 2014) | 1 line

CCDB databases update for 1.00 version
------------------------------------------------------------------------
r1492 | romanov | 2014-01-13 18:54:52 -0500 (Mon, 13 Jan 2014) | 1 line

CCDB sqlite shcema update for next version
------------------------------------------------------------------------
r1495 | romanov | 2014-01-14 19:30:36 -0500 (Tue, 14 Jan 2014) | 1 line

users_create script to create or reacreate users lists (for example during cron job)
------------------------------------------------------------------------
r1496 | romanov | 2014-01-14 19:33:02 -0500 (Tue, 14 Jan 2014) | 1 line

Create and delete users
------------------------------------------------------------------------
r1502 | romanov | 2014-01-16 16:41:07 -0500 (Thu, 16 Jan 2014) | 2 lines

Perl script to get all halld database users
users_create.py doesn't stop on users that are already exists. 
------------------------------------------------------------------------
r1504 | marki | 2014-01-17 08:56:23 -0500 (Fri, 17 Jan 2014) | 3 lines

Fixed bug in my original script. Insert missing comma between group lines.
M    group_parse.pl

------------------------------------------------------------------------
r1506 | romanov | 2014-01-17 15:17:04 -0500 (Fri, 17 Jan 2014) | 1 line

mkdir comment fix
------------------------------------------------------------------------
r1507 | romanov | 2014-01-17 15:26:05 -0500 (Fri, 17 Jan 2014) | 1 line

Error regression test for comments in mkdir error
------------------------------------------------------------------------
r1510 | romanov | 2014-01-21 15:29:48 -0500 (Tue, 21 Jan 2014) | 1 line

Ccdb documentation update
------------------------------------------------------------------------
r1530 | romanov | 2014-02-03 11:01:07 -0500 (Mon, 03 Feb 2014) | 1 line

Inactivity time fixed
------------------------------------------------------------------------
r1531 | romanov | 2014-02-03 11:03:18 -0500 (Mon, 03 Feb 2014) | 1 line

doc update
------------------------------------------------------------------------
r1539 | romanov | 2014-02-04 15:37:09 -0500 (Tue, 04 Feb 2014) | 2 lines

SqlAlchemy update to 9.2
A  bug with doublication of directory in ls is fixed
------------------------------------------------------------------------
r1540 | romanov | 2014-02-04 15:45:55 -0500 (Tue, 04 Feb 2014) | 2 lines

SqlAlchemy update to 9.2
A  bug with doublication of directory in ls is fixed
------------------------------------------------------------------------
r1549 | romanov | 2014-02-06 18:51:53 -0500 (Thu, 06 Feb 2014) | 4 lines

parse string fixed bag,
empty utility example update
help updated (connection strings examples added)

------------------------------------------------------------------------
r1550 | romanov | 2014-02-06 18:52:51 -0500 (Thu, 06 Feb 2014) | 2 lines

help updated 

------------------------------------------------------------------------
r1552 | romanov | 2014-02-07 17:26:15 -0500 (Fri, 07 Feb 2014) | 4 lines

info command updated
small bugs in provider fixed
unit tests update

------------------------------------------------------------------------
r1561 | romanov | 2014-02-12 13:55:46 -0500 (Wed, 12 Feb 2014) | 1 line

Schema version is set to 4
------------------------------------------------------------------------
r1567 | romanov | 2014-02-13 18:17:09 -0500 (Thu, 13 Feb 2014) | 1 line

Is deleted flag for autogenerated users is set to 0
------------------------------------------------------------------------
r1569 | romanov | 2014-02-14 14:53:13 -0500 (Fri, 14 Feb 2014) | 1 line

CCDB text update
------------------------------------------------------------------------
r1570 | romanov | 2014-02-14 15:10:56 -0500 (Fri, 14 Feb 2014) | 1 line

ccdb.sqlite schema is updated to version 4
------------------------------------------------------------------------
r1589 | romanov | 2014-02-17 20:36:38 -0500 (Mon, 17 Feb 2014) | 1 line

dump command fixed
------------------------------------------------------------------------
r1590 | romanov | 2014-02-17 21:43:01 -0500 (Mon, 17 Feb 2014) | 1 line

Documentation update
------------------------------------------------------------------------
r1591 | romanov | 2014-02-18 15:55:44 -0500 (Tue, 18 Feb 2014) | 1 line

example how to stroe xml in ccdb
------------------------------------------------------------------------
r1598 | romanov | 2014-02-21 10:43:42 -0500 (Fri, 21 Feb 2014) | 2 lines

Test update
AlchemyProvider improvements
------------------------------------------------------------------------
r1599 | romanov | 2014-02-21 10:44:44 -0500 (Fri, 21 Feb 2014) | 1 line

Tests update
------------------------------------------------------------------------
r1600 | romanov | 2014-02-21 10:50:39 -0500 (Fri, 21 Feb 2014) | 1 line

Tests update
------------------------------------------------------------------------
r1665 | romanov | 2014-03-06 21:13:37 -0500 (Thu, 06 Mar 2014) | 1 line

Documentation update
------------------------------------------------------------------------
r1690 | romanov | 2014-03-20 21:47:24 -0400 (Thu, 20 Mar 2014) | 1 line

SQLite isn't recompiled each time
------------------------------------------------------------------------
r1699 | romanov | 2014-03-21 13:58:24 -0400 (Fri, 21 Mar 2014) | 1 line

get single value 
------------------------------------------------------------------------
r1700 | romanov | 2014-03-21 13:59:25 -0400 (Fri, 21 Mar 2014) | 1 line

Simple example
------------------------------------------------------------------------
r1722 | romanov | 2014-03-25 14:11:25 -0400 (Tue, 25 Mar 2014) | 1 line

Basic java implementation
------------------------------------------------------------------------
r1723 | romanov | 2014-03-25 14:45:50 -0400 (Tue, 25 Mar 2014) | 1 line

Comments added
------------------------------------------------------------------------
r1727 | romanov | 2014-03-25 18:08:50 -0400 (Tue, 25 Mar 2014) | 1 line

Pep8 improvements
------------------------------------------------------------------------
r1728 | romanov | 2014-03-25 18:13:06 -0400 (Tue, 25 Mar 2014) | 1 line

Pep8 improvements
------------------------------------------------------------------------
r1729 | romanov | 2014-03-25 18:14:32 -0400 (Tue, 25 Mar 2014) | 1 line

Pep8 improvements
------------------------------------------------------------------------
r1733 | romanov | 2014-03-25 20:09:02 -0400 (Tue, 25 Mar 2014) | 1 line

When adding data, types are checked now
------------------------------------------------------------------------
r1775 | romanov | 2014-04-04 14:06:01 -0400 (Fri, 04 Apr 2014) | 2 lines

Fixed bug with parsing of doubles and ints
SQLite Sconscript fixed
------------------------------------------------------------------------
r1776 | romanov | 2014-04-04 15:44:39 -0400 (Fri, 04 Apr 2014) | 1 line

Time parsing bugs changed
------------------------------------------------------------------------
r1777 | romanov | 2014-04-04 15:48:03 -0400 (Fri, 04 Apr 2014) | 1 line

Time parsing bugs 
------------------------------------------------------------------------
r1778 | romanov | 2014-04-04 15:54:06 -0400 (Fri, 04 Apr 2014) | 1 line

requests example
------------------------------------------------------------------------
r1779 | romanov | 2014-04-04 17:01:10 -0400 (Fri, 04 Apr 2014) | 1 line

-m32 forced flag added to scons options
------------------------------------------------------------------------
r1793 | romanov | 2014-04-10 15:16:31 -0400 (Thu, 10 Apr 2014) | 1 line

Catch unit test framework updated
------------------------------------------------------------------------
r1794 | romanov | 2014-04-10 16:55:56 -0400 (Thu, 10 Apr 2014) | 1 line

Time parsing issues update
------------------------------------------------------------------------
r1795 | romanov | 2014-04-10 16:57:08 -0400 (Thu, 10 Apr 2014) | 1 line

Catch framework update. Tests update
------------------------------------------------------------------------
r1796 | romanov | 2014-04-10 16:59:50 -0400 (Thu, 10 Apr 2014) | 1 line

Tests for time parse update
------------------------------------------------------------------------
r1797 | romanov | 2014-04-10 17:00:06 -0400 (Thu, 10 Apr 2014) | 1 line

Tests for time parse update
------------------------------------------------------------------------
r1798 | romanov | 2014-04-10 17:22:15 -0400 (Thu, 10 Apr 2014) | 4 lines

sqlite dummy database corresponds to mysql

M    ccdb.sqlite

------------------------------------------------------------------------
r1799 | romanov | 2014-04-10 17:34:11 -0400 (Thu, 10 Apr 2014) | 4 lines

sqlite database corresponds to mysql now

M    ccdb.sqlite

------------------------------------------------------------------------
r1800 | romanov | 2014-04-10 17:35:41 -0400 (Thu, 10 Apr 2014) | 1 line

Fix time shift between mysql and sqlite
------------------------------------------------------------------------
r1802 | romanov | 2014-04-11 14:34:44 -0400 (Fri, 11 Apr 2014) | 1 line

Infer status by file
------------------------------------------------------------------------
r1803 | romanov | 2014-04-11 14:48:40 -0400 (Fri, 11 Apr 2014) | 1 line

Infer status by file
------------------------------------------------------------------------
r1804 | romanov | 2014-04-11 14:49:36 -0400 (Fri, 11 Apr 2014) | 1 line

Infer status by file
------------------------------------------------------------------------
r1805 | romanov | 2014-04-11 16:59:35 -0400 (Fri, 11 Apr 2014) | 3 lines

-f flag for info command
mktbl -f unit tests update. 
The feature is considered working now
------------------------------------------------------------------------
r1806 | romanov | 2014-04-11 19:27:33 -0400 (Fri, 11 Apr 2014) | 1 line

ls remade
------------------------------------------------------------------------
r1807 | romanov | 2014-04-11 22:45:27 -0400 (Fri, 11 Apr 2014) | 1 line

Infer status by file
------------------------------------------------------------------------
r1811 | romanov | 2014-04-15 12:56:35 -0400 (Tue, 15 Apr 2014) | 2 lines

Comments update
Slight unit tests update
------------------------------------------------------------------------
r1812 | romanov | 2014-04-15 17:19:39 -0400 (Tue, 15 Apr 2014) | 1 line

Java version code gardening
------------------------------------------------------------------------
r1813 | romanov | 2014-04-15 17:58:38 -0400 (Tue, 15 Apr 2014) | 1 line

Java version code gardening
------------------------------------------------------------------------
r1814 | romanov | 2014-04-15 18:28:39 -0400 (Tue, 15 Apr 2014) | 1 line

mysql jar added by default
------------------------------------------------------------------------
r1815 | romanov | 2014-04-15 18:31:16 -0400 (Tue, 15 Apr 2014) | 1 line

Java version code gardening
------------------------------------------------------------------------
r1816 | romanov | 2014-04-15 19:52:49 -0400 (Tue, 15 Apr 2014) | 1 line

Patch for situation when ':' is found in time string 
------------------------------------------------------------------------
r1817 | romanov | 2014-04-15 19:57:25 -0400 (Tue, 15 Apr 2014) | 1 line

Java version code gardening
------------------------------------------------------------------------
r1818 | romanov | 2014-04-15 20:40:13 -0400 (Tue, 15 Apr 2014) | 1 line

Better parse of mysql connection string
------------------------------------------------------------------------
r1819 | romanov | 2014-04-15 21:05:16 -0400 (Tue, 15 Apr 2014) | 1 line

SQLite JDBC drivers added to lib folder
------------------------------------------------------------------------
r1826 | romanov | 2014-04-16 15:27:12 -0400 (Wed, 16 Apr 2014) | 1 line

Java version code gardening
------------------------------------------------------------------------
r1827 | romanov | 2014-04-16 19:53:19 -0400 (Wed, 16 Apr 2014) | 1 line

Java version code gardening
------------------------------------------------------------------------
r1828 | romanov | 2014-04-16 21:20:54 -0400 (Wed, 16 Apr 2014) | 1 line

Java version code gardening
------------------------------------------------------------------------
r1829 | romanov | 2014-04-16 21:33:08 -0400 (Wed, 16 Apr 2014) | 1 line

ccdb.jar added to the project
------------------------------------------------------------------------
r1830 | romanov | 2014-04-16 21:34:44 -0400 (Wed, 16 Apr 2014) | 1 line

svn cleanup
------------------------------------------------------------------------
r1835 | romanov | 2014-04-18 15:11:29 -0400 (Fri, 18 Apr 2014) | 1 line

Calibration returns Assignment now. Assignment have GetValue and GetValueType functions
------------------------------------------------------------------------
r1837 | romanov | 2014-04-18 17:43:50 -0400 (Fri, 18 Apr 2014) | 5 lines

New API unit tests
Bug with variation select fixed,
Bug with deleting assignment before using result fixed


------------------------------------------------------------------------
r1838 | romanov | 2014-04-18 17:49:28 -0400 (Fri, 18 Apr 2014) | 2 lines

Typo fix

------------------------------------------------------------------------
r1839 | romanov | 2014-04-18 18:14:30 -0400 (Fri, 18 Apr 2014) | 1 line

Cleanup
------------------------------------------------------------------------
r1840 | romanov | 2014-04-21 12:57:38 -0400 (Mon, 21 Apr 2014) | 1 line

Default values for CreateCalibration added
------------------------------------------------------------------------
r1841 | romanov | 2014-04-21 13:58:48 -0400 (Mon, 21 Apr 2014) | 1 line

simple example update
------------------------------------------------------------------------
r1842 | romanov | 2014-04-21 14:32:56 -0400 (Mon, 21 Apr 2014) | 1 line

GetRowsCount() and GetColumnsCount() functions added to Assignment object 
------------------------------------------------------------------------
r1844 | romanov | 2014-04-21 14:44:45 -0400 (Mon, 21 Apr 2014) | 1 line

Type fix
------------------------------------------------------------------------
r1845 | romanov | 2014-04-21 14:46:50 -0400 (Mon, 21 Apr 2014) | 1 line

typo fix
------------------------------------------------------------------------
r1846 | romanov | 2014-04-21 14:50:45 -0400 (Mon, 21 Apr 2014) | 1 line

GetRowsCount() and GetColumnsCount() functions added to Assignment object 
------------------------------------------------------------------------
r1847 | romanov | 2014-04-21 15:17:42 -0400 (Mon, 21 Apr 2014) | 1 line

Type GetVelue is changed to GetValue
------------------------------------------------------------------------
r1848 | romanov | 2014-04-21 15:19:02 -0400 (Mon, 21 Apr 2014) | 1 line

Typos fix
------------------------------------------------------------------------
r1849 | romanov | 2014-04-21 15:20:22 -0400 (Mon, 21 Apr 2014) | 1 line

Typos fix
------------------------------------------------------------------------
r1850 | romanov | 2014-04-21 15:38:29 -0400 (Mon, 21 Apr 2014) | 1 line

Typos fix
------------------------------------------------------------------------
r1851 | romanov | 2014-04-21 15:41:52 -0400 (Mon, 21 Apr 2014) | 1 line

Typo fix
------------------------------------------------------------------------
r1852 | romanov | 2014-04-21 15:44:32 -0400 (Mon, 21 Apr 2014) | 1 line

Assignments example added. It describes how to get extended information about particular ccdb data
------------------------------------------------------------------------
r1853 | romanov | 2014-04-21 15:52:35 -0400 (Mon, 21 Apr 2014) | 1 line

Scons description of how to compile CCDB examples added
------------------------------------------------------------------------
r1854 | romanov | 2014-04-21 17:15:10 -0400 (Mon, 21 Apr 2014) | 1 line

Java example update
------------------------------------------------------------------------
r1855 | romanov | 2014-04-21 17:17:27 -0400 (Mon, 21 Apr 2014) | 1 line

Java example update
------------------------------------------------------------------------
r1856 | romanov | 2014-04-21 17:18:12 -0400 (Mon, 21 Apr 2014) | 1 line

Java example update
------------------------------------------------------------------------
r1857 | romanov | 2014-04-21 17:23:18 -0400 (Mon, 21 Apr 2014) | 1 line

Java example update
------------------------------------------------------------------------
r1858 | romanov | 2014-04-22 14:27:56 -0400 (Tue, 22 Apr 2014) | 1 line

Java update. getColumnValuesString function introduced to get all values of one column
------------------------------------------------------------------------
r1859 | romanov | 2014-04-22 14:43:13 -0400 (Tue, 22 Apr 2014) | 1 line

Java part. Class.forName("com.mysql.jdbc.Driver") added so mysql driver loads automatically
------------------------------------------------------------------------
r1862 | romanov | 2014-04-23 00:18:26 -0400 (Wed, 23 Apr 2014) | 2 lines

Function isTableAvailable added 
Function overloads for getting data from assignment as double, int, long, boolean added
------------------------------------------------------------------------
r1884 | romanov | 2014-05-07 03:06:34 -0400 (Wed, 07 May 2014) | 1 line

Comments update
------------------------------------------------------------------------
